{% extends "base.html" %}

{% block title %}Disease Model {{ obj.id }}{% endblock %}

{% block additional_head %}
<script type="text/javascript" src="/public/prototype-1.6.0.2.js"></script>
{% endblock %}

{% block content %}

<div>
<h1>Model #{{ dm.id }}:
{{ dm }}
[<a href="{{ dm.id }}.json">json</a>]
</h1>
<img src="spark_{{ dm.id }}.png" usemap="#sparkmap" 
     style="float: left"/>
<map name="sparkmap">
  {% for r in dm.px_hash.items %}
    <area shape="rect" coords="{{ r.1 }}" onmouseover="show_only($('{{ r.0 }}'));"
          href="tile_{{ dm.id }}_{{ dm.condition }}+{{ r.0 }}.png" title="{{ r.0 }}" 
          target="_blank" />
  {% endfor %}
</map>

<div id="overlay">
  {% for r in dm.px_hash.items %}
  <img src="bar_{{ dm.id }}_{{ dm.condition }}+{{ r.0 }}.png" id="{{ r.0 }}"
       width="600" height="800" style="display: none;"/>
  {% endfor %}
</div>

<script>
function show_only(dm) {
  {% for r in dm.px_hash.items %}
  $("{{ r.0 }}").hide()
  {% endfor %}
  dm.show()
};
show_only($("all+world+1997+total"));
</script>

</div>

<br/>
<br/>
<br/>
<br/>
<div id="data">
<h1>Data Included: [<a href="/dismod/summary/{{dm.id}}">summary</a>]</h1>
<table>
{% for data in dm.data.all %}
<tr class="{% cycle 'odd' 'even' %}">
<td><a href="{{ data.get_absolute_url }}">{{ data.id }}.</a></td>
<td>{{ data.condition }}</td>
<td>{{ data.data_type }}</td>
<td>{{ data.region }}</td>
<td>{{ data.year_str }}</td>
<td>{{ data.get_sex_display }}</td>
<td>{{ data.age_str }}</td>
<td>{{ data.value_str }}</td>
</tr>
{% endfor %}
</table>
</div>

</div>

{% endblock %}


{% block sidebar %}
{% include '_sidebar.html' %}
{% endblock %}
