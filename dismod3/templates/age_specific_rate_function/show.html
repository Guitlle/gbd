{% extends "base.html" %}

{% block title %}Age-Specific Rate Functions{% endblock %}

{% block content %}

<div id="plot">
<img src="{% url dismod3.views.age_specific_rate_function_show id_str, "png" %}?{{ query_str }}">
<br />
<a href="{% url dismod3.views.age_specific_rate_function_show id_str, "png" %}">png</a>
<a href="{% url dismod3.views.age_specific_rate_function_show id_str, "pdf" %}">pdf</a>
<br />
<form name="zoom" action="" method="get">
y max:
<input type="text" name="ymax">
<input type="submit" value="zoom">
</form>
</div>

<script>
curr=$('plot')
</script>

<div id="rates" style="display: none;">
<h1>Rate Information</h1>
<table>
{% for rf in asrfs %}
  <tr class='odd'><th colspan="3">Rates in {{rf.id}} {{ rf }}</th></tr>
  <tr class='even'><th>ID</th><th>Info</th><th>Rate</th></tr>
  {% for r in rf.rates.all|dictsortreversed:"rate" %}
    <tr class="{% cycle 'odd' 'even' %}">
      <td><a href="{% url dismod3.views.rate_show r.id %}">{{ r.id }}</a>
          [<a href="{% url dismod3.views.rate_show r.id %}">s</a>, <a href="/admin/dismod3/rate/{{ r.id }}">e</a>]
      </td>
      <td>{{ r }}</td>
      <td>{{ r.pretty_rate }}</td>
    </tr>
  {% endfor %}
{% endfor %}
</table>
</div>

{% load colorized_python %}

<div id="code" style="display: none;">
{% for rf in asrfs %}
<div style="float: left; overflow: auto;">
<h2>{{ rf.id }}: {{ rf }}</h2>
{{ rf.fit.rate_model|colorized_python }}
</div>
{% endfor %}
</div>


<div id="predictive_check" style="display: none">
<h1>Posterior Predictive Check(s)</h1>
{% for rf in asrfs %}
  <div style="float: left">
  <img src="{% url dismod3.views.asrf_posterior_predictive_check_scatter rf.id, "png" %}">
  <br />
  <a href="{% url dismod3.views.asrf_posterior_predictive_check_scatter rf.id, "pdf" %}">pdf</a>
  </div>

  <div>
  <img src="{% url dismod3.views.asrf_posterior_predictive_check_intervals rf.id, "png" %}">
  <br />
  <a href="{% url dismod3.views.asrf_posterior_predictive_check_intervals rf.id, "pdf" %}">pdf</a>
  </div>

  <br />
{% endfor %}
</div>

<div id="comparisons" style="display: none">
{% include "age_specific_rate_function/_comparisons.html" %}
</div>

{% endblock %}

{% block sidebar_extra %}
<!--
{% include "controls.html" %}
-->

{% for rf in asrfs %}
<a href="{{ rf.id }}">{{ rf.id }}</a>
<a href="{{ rf.get_edit_url }}">edit</a>
<a href="{% url dismod3.views.age_specific_rate_function_clone rf.id %}">clone</a>
<br />
{% endfor %}

<button onclick="curr.hide(); $('plot').show(); curr=$('plot')">Show Plot</button>
<br />
<button onclick="curr.hide(); $('rates').show(); curr=$('rates')">Show Rates</button>
<br />
<button onclick="curr.hide(); $('code').show(); curr=$('code')">Show Code</button>
<br />
<button onclick="curr.hide(); $('predictive_check').show(); curr=$('predictive_check')">Show Predictive Check</button>
<br />
<button onclick="curr.hide(); $('comparisons').show(); curr=$('comparisons')">Show Comparisons</button>
<br />
{% endblock %}
